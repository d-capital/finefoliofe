<section id="result">
    <h2>{{ title }}</h2>

    <!-- Filters -->
    <div class="filters-container">
        <h3>{{ filterLabel }}</h3>

        <div class="filters-grid">
            <div class="filter-item">
            <label for="maxPe">{{fitlerPeLabel}}</label>
            <input id="maxPe" type="number" [(ngModel)]="filters.maxPe" placeholder="{{filterPeDefaultValue}}" />
            </div>
            <div class="filter-item">
            <label for="minDiv">{{filterMinDivLabel}}</label>
            <input id="minDiv" type="number" [(ngModel)]="filters.minDividend" placeholder="{{filterMinDivDefaultValue}}" />
            </div>
        </div>

        <div class="filters-actions">
            <button (click)="applyFilters()">{{ applyLabel }}</button>
        </div>
    </div>
    
    <!-- Screener Results -->
    <div class="table-container">

        <div *ngIf="loading" class="loading-skeleton">
            <div class="skeleton-row" *ngFor="let i of [1,2,3,4,5]">
                <div class="skeleton-cell" *ngFor="let j of [1,2,3,4,5,6]"></div>
            </div>
        </div>
        <table *ngIf="!loading" id="resultsTable">
            <thead>
                <tr>
                    <th *ngFor="let col of columns" [title]="col.full">
                        {{ col.short }}
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let r of results">
                    <!--td>{{r.id}}</td-->
                    <td><a href="/valuate/{{r.exchange}}/{{r.ticker}}">{{r.company}}</a></td>
                    <td>{{r.ticker}}</td>
                    <td *ngIf="r.fairPrice && r.price && r.result=='Overvalued'"style="width: 100px;">ðŸ“‰ ({{ round(r.fairPrice/r.price) }}%)</td>
                    <td *ngIf="r.fairPrice && r.price && r.result=='Undervalued'"style="width: 100px;">ðŸ“ˆ ({{ round(r.fairPrice/r.price) }}%)</td>
                    <td *ngIf="!r.result || !r.price || !r.fairPrice"style="width: 100px;"> - </td>
                    <td>{{r.fairPrice}}</td>
                    <td>{{r.pegTtm}}</td>
                    <!--td>{{r.netIncomeGrowthTtm}}%</td>
                    <td>{{r.netIncomeGrowth3y}}%</td>
                    <td>{{r.netIncomeGrowth5y}}%</td>
                    <td>{{r.netIncomeGrowthNext1y}}%</td>
                    <td>{{r.netIncomeGrowthNext3y}}%</td-->
                    <td>{{r.freeCashFlow | abbreviateNumber}}</td>
                    <td>{{r.deFy}}</td>
                    <td>{{r.dividendYield}}%</td>
                    <td>{{r.peTtm}}</td>
                    <!--td>{{r.forwardPe}}</td-->
                    <td>{{r.price}}</td>
                    <td>{{r.type}}</td>
                    <td>{{r.marketCap | abbreviateNumber}}</td>
                    <td>{{r.sector}}</td>
                    <!--td>{{r.industry}}</td-->
                    <!--td>{{r.country}}</td-->
                </tr>
            </tbody>
        </table>
    </div>

    <button style="margin-top: 1%;" (click)="exportTableToCSV()">{{ downloadLabel }}</button>
</section>